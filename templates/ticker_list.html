<!DOCTYPE html>
<html>
<head>
    <title>Input Page</title>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
</head>
<body>
    <h1>Data Input</h1>

    <label for="currency1">Currency 1:</label>
    <select id="currency1">
        <!-- Options for currency 1 will be populated dynamically -->
    </select>

    <label for="currency2">Currency 2:</label>
    <select id="currency2">
        <!-- Options for currency 2 will be populated dynamically -->
    </select>

    <label for="text-input">Additional Information:</label>
    <input type="text" id="text-input" placeholder="Enter text here">

    <button onclick="submitData()">Submit</button>

    <!-- ... (other HTML code) ... -->

<script>
    $(document).ready(function() {
        $.ajax({
            url: '/currency_data', // Endpoint to fetch currency values from Flask
            type: 'GET',
            success: function(response) {
                populateDropdown('currency1', response.data);
                populateDropdown('currency2', response.data);
            },
            error: function(error) {
                console.error('Error fetching currency values:', error);
            }
        });
    });

    function populateDropdown(elementId, data) {
        var dropdown = document.getElementById(elementId);
        data.forEach(function(item) {
            var option = document.createElement('option');
            option.value = item[1]; // Assuming the currency name is at index 1
            option.textContent = item[1]; // Assuming the currency name is at index 1
            dropdown.appendChild(option);
        });
    }

    function submitData() {
        var currency1 = document.getElementById('currency1').value;
        var currency2 = document.getElementById('currency2').value;
        var additionalInfo = document.getElementById('text-input').value;

        console.log('Currency 1:', currency1);
        console.log('Currency 2:', currency2);
        console.log('Additional Info:', additionalInfo);
    }
</script>

<h1>Ticker Data from PostgreSQL Database</h1>
<table>
    <thead>
        <tr>
            <th>Currency 1</th>
            <th>Currency 2</th>
            <th>Ticker</th>
        </tr>
    </thead>
    <tbody id="data-table">
        <!-- Data will be dynamically updated here -->
    </tbody>
</table>

<script>
    function fetchData() {
        $.ajax({
            url: '/ticker_data', // Endpoint to fetch data from Flask
            type: 'GET',
            success: function(response) {
                console.log('Received data:', response.data); // Log received data
                updateUI(response.data);
            },
            error: function(error) {
                console.error('Error fetching data:', error);
            }
        });
    }

    function updateUI(data) {
        $('#data-table').empty(); // Clear existing data

        // Display new data
        data.forEach(function(item) {
            $('#data-table').append(`
                <tr>
                    <td>${item[0]}</td>
                    <td>${item[1]}</td>
                    <td>${item[2]}</td>
                    <td>
                        <button onclick="editRow(${item[0]})">Edit</button>
                        <button onclick="deleteRow(${item[0]})">Delete</button>
                    </td>
                </tr>
            `);
        });
    }

    // Function placeholders for edit and delete actions
    function editRow(id) {
        console.log('Edit button clicked for ID:', id);
        // Implement your edit logic here
    }

    function deleteRow(id) {
        console.log('Delete button clicked for ID:', id);
        // Implement your delete logic here
    }

    // Initial fetch when the page loads
    $(document).ready(function() {
        fetchData();
    });
</script>

</body>
</html>
